---
description: '- Network Address Translation'
---

# NAT

* 1개의 실제 공인 IP 주소에, 다량의 가상 사설 IP 주소를 할당 및 매핑하는, 1:1 또는 1:다 주소 변환(Address Translation) 방식&#x20;
*   NAT 및 DHCP 비교

    * NAT - 사설 IP 주소공간을 별도로 정하고는, IP 주소변환에 중점을 둠&#x20;
      * 기본적으로, 인터넷 상에 동일 IP 주소를 재사용할 수 있게 하는 것&#x20;
    * DHCP - 기확보된 공인 IP주소 Pool을 집단 공유하며, 사용후 반납&#x20;
      * 기본적으로, 제한된 IP 주소를 공유케 하여 절약하려는 것&#x20;



#### NAT의 사용 이유 및 유의점&#x20;

* IPv4의 IPv4 주소 고갈 및 라우팅 테이블 대형화에 대한 해소책&#x20;
* 공인 IP 주소의 효율적 공유 및 절약&#x20;
  * 공인 IP 주소 사용시 ISP를 바꿀 때마다, 모든 컴퓨터 주소를 바꿔야하는 등의 단점 해소&#x20;
* 또한, 주소변환을 통해 내부 사설망 보안 및 Load Balancing 등도 가능&#x20;
  * 방화벽 등과 결합되어 함께 기능 수행&#x20;
    * 내/외 주소변환 규칙을 외부에서 알 수 없으므로,&#x20;
    * 내부 망에 대한 정보(내부망 주소, 숫자 설정 등)가 외부에 노출 안 됨(프라이버시 보호, 은닉)
* 주로, 외부망과 사설망 간에 연결점에 있는 라우터에서 수행됨&#x20;



* NAT는, IP 주소 변환 뿐만 아니라, IP 주소, TCP Checksum, UDP Checksum 등 서로 관련된 많은 부분도 함께 변경해야 함&#x20;
  * 매 연결 단위로 연결 상태 정보를 필요로 하고
  * 다수의 프로토콜 계층에 걸쳐 동작해야 할 필요가 있는 등&#x20;
* FIP, SIP에서 문제가 발생



#### NAT의 주요 기능&#x20;

* IP Masquerading (IP 위장, IP 마스커레이드)
  *   외부망에서 볼 때 내부망 여러 호스트들이 단일 NAT 서버 하나로만 보임&#x20;


  * 단 하나의 공인 IP로 내부 모든 PC가 대표 IP 주소를 공유 사용&#x20;
  * IP 계층, 전송 계층 모두에서 변환(맵핑)으로, 마치 Masquerading 효과가 있음&#x20;



* Port Forwarding (포트 포워드)
  * Transport 계층에서, 내부망 여러 호스트들이 외부망과 각각 별도로 연결짓게 할 수 있음&#x20;
  * 서비스 포트 변호 별로 내부의 사설 IP로 지정된 호스트로 전달&#x20;



* Load Balancing&#x20;
  * 각 포트별로 트래픽을 균형있게 함&#x20;



* 패킷 필터링&#x20;

#### NAT의 방식 구분&#x20;

* Basic NAT 방식 (IP 주소변환만 수행)
  * 정적 NAT&#x20;
    * 수동으로 외부 공인 IP와 사설 IP를 매핑&#x20;
  * 동적 NAT
    * 사설 IP 주소를 Pool화하여 공인 주소로 자동 매핑&#x20;
* NAPT 또는 PAT 방식&#x20;
  * IP 주소 뿐만 아니라 포트 번호 등까지도 포함시켜 내부 호스트를 구분&#x20;
  * TCP, UDP에서는 포트번호, ICMP에서는 질의식별자



#### NAPT (Network Address Port Translation) 또는 PAT(Port Address Translation), 그리고 문제점&#x20;

* 원래는 => Basic NAT
  * IP 주소 변환(공인 IP 주소 => 사설 IP 주소) 만을 이용하는 기본적인 NAT 방식이었음&#x20;
  * 즉, IP 헤더의 목적지와 출발지 주소만 변경하고, IP 패킷 내부에 다른 어떤 처리도 안함&#x20;
* 그러다가 => NAPT
  * TCP, UDP 헤더 내 포트 번호 변환을 통해 (IP 주소 및 포트 번호를 모두 함께 결합시킴)
  * 하나의 IP 주소 및 여러 포트 번호에 의해,&#x20;
  * 여러 내부 호스트 주소 및 포트를 연결이 가능해짐(IP Masquerading)
* 이에따라, 구현이 복잡해지는 등 문제점 발생&#x20;
  * 프로토콜, 응용마다 NAT 구현이 달라짐&#x20;
  * NAT 자신이 연결 마다 내부 상태 정보(내부 호스트 IP주소, 포트 번호 등)를 보존 필요&#x20;
  * SIP를 이용한 어플리케이션 등?

#### Twice NAT 방식&#x20;

* 출발지 주소, 목적지 주소 모두를 변환하는 방식
  * 동일 회사 내 멀리 떨어진 두 지사 간에 인터넷 경유 연결 등&#x20;







####

[http://www.ktword.co.kr/test/view/view.php?no=1676](http://www.ktword.co.kr/test/view/view.php?no=1676)
